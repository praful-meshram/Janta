/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.42
 * Generated at: 2014-02-20 07:58:39 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import bachka.MixtureMapping;
import java.util.Iterator;
import java.util.Vector;
import inventory.ManageInventory;
import com.google.gson.JsonObject;
import beans.InputBeanBachkaMapping;
import beans.JasonObject;
import com.google.gson.Gson;
import beans.OutputBeanBachkaMapping;
import java.util.ArrayList;
import bachka.BachkaMapping;
import java.sql.ResultSet;

public final class BachkaMappingAjaxResponse_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write(" \n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write('\n');

	/* session.getAttribute("UserName").toString(); */
	String ajaxCallOption = request.getParameter("ajaxCallOption");
	
	//code to display ste list 
	if (ajaxCallOption.equals("getSite")) {
		BachkaMapping bachkaMapping = new BachkaMapping();
		ResultSet resultSet = bachkaMapping.getSite();
		String siteName = "";
		Integer siteId = 0;
	
		

      out.write("\n");
      out.write("\n");
      out.write("<select name=\"siteId\" style=\"width: 150px;\" tabindex=\"1\" id=\"siteId\" class=\"textfield\">\t\n");
      out.write("\t<option value=\"\">Select</option>\n");
      out.write("\t");

		while (resultSet.next()) {
				siteId = resultSet.getInt(1);
				siteName = resultSet.getString(2);
				
	
      out.write("\n");
      out.write("\t<option value=\"");
      out.print(siteId);
      out.write('"');
      out.write('>');
      out.print(siteName);
      out.write("</option>\n");
      out.write("\n");
      out.write("\t");

		}
	resultSet.close();
	bachkaMapping.closeAll();
	
	
      out.write("\n");
      out.write("\t\n");
      out.write("</select>\n");

	}
		
	// display bachka information
	else if (ajaxCallOption.equals("searchBachka")) {
		ManageInventory objMI = new ManageInventory("jdbc/js");
		//MixtureMapping mixtureMapping = new MixtureMapping();
		BachkaMapping bachkaMapping = new BachkaMapping();
		String barcode = "", itemName = "";
		barcode = request.getParameter("searchBarCode");
		itemName = request.getParameter("searchItemName");
		int siteId = Integer.parseInt(request.getParameter("siteId"));
		String item_group_code = request.getParameter("item_group_code");
		//objMI.searchBachka(barcode, itemName, ajaxCallOption);
	
	//	System.out.println("get item by group code " +item_group_code +"\n site Id "+siteId);
		
		String item_code, item_weight, item_name, title;
		int item_qty, price_version, item_pv_qty, site_qty, total_site_qty, item_box_qty;
		double item_mrp, item_rate;
		//
		System.out.println("=======\nPackaging Ajax Response session "+session);
		System.out.println("=======\nPackaging item_group_code "+item_group_code);
		
		
      out.write("\n");
      out.write("\t\t\t<table style=\"width: 100%;max-height: 100%;border:1px solid #98bf21;border-collapse: collapse;margin-left: 5px;\" id=\"bachkaTable\">\n");
      out.write("\t\t\t<thead style=\"height: 10px;border:1px solid #98bf21;font-size:15px;\n");
      out.write("\t\t\t\ttext-align:left;\n");
      out.write("\t\t\t\tpadding-top:5px;\n");
      out.write("\t\t\t\tpadding-bottom:4px;\n");
      out.write("\t\t\t\tbackground-color:#A7C942;\n");
      out.write("\t\t\t\tcolor:#ffffff;\">\n");
      out.write("\t\t\t\t\t<!-- <tr style=\"text-align: left;\">\n");
      out.write("\t\t\t\t\t<th style=\"width: 45%;\">Item Name</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 13%;\">Weight</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 13%;\">MRP</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 15%;\">Site Inventory</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 15%;\">Total Inventory</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 25%;\">Item Group Code</th>\n");
      out.write("\t\t\t\t\t -->\n");
      out.write("\t\t\t\t\t <tr>\n");
      out.write("\t\t\t\t\t<th style=\"width: 55%;\">Item Name</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 12%;\">Weight</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 10%;\">MRP</th>\n");
      out.write("\t\t\t\t\t<!-- <th style=\"width: 15%;\">Site Inventory</th> -->\n");
      out.write("\t\t\t\t\t<th style=\"width: 20%;\">Total Inventory</th>\n");
      out.write("\t\t\t\t\t<!-- <th style=\"width: 30%;\">Item Group Code</th> -->\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t</thead>\n");
      out.write("\t\t\t<tbody style=\"cursor: pointer;\">\n");
      out.write("\t\t");

		
		ResultSet resultSet = bachkaMapping.searchBachka( barcode, itemName, ajaxCallOption,item_group_code);
				
				if(resultSet.next()) {
					int count =0;
					do{
						/*select m.item_code, m.item_weight, m.item_name, m.item_qty , m.item_mrp*/
						
					/* 	barcode = resultSet.getString(1);
						item_code = resultSet.getString(2);
						item_weight = resultSet.getString(3);
						System.out.println("=======\nitem weight "+item_weight);
						item_name = resultSet.getString(4);
					//	System.out.println("=======\nitem name "+item_name);
						price_version = resultSet.getInt(6);
						item_mrp = resultSet.getDouble(7);
						item_rate = resultSet.getDouble(8);
						item_pv_qty = resultSet.getInt(9);
						item_box_qty = resultSet.getInt(10);
						//item_group_code = resultSet.getString("item_group_code");
						item_group_code = resultSet.getString(11);
						site_qty = objMI.getSiteQuantity(item_code, siteId,	price_version);
						item_qty = objMI.getTotalSiteQuantity(item_code,price_version); */
						
						item_code = resultSet.getString(1);
						System.out.println("=======\niitem_code "+item_code);
						item_weight = resultSet.getString(2);
						item_name = resultSet.getString(3);
						item_qty = Integer.parseInt(resultSet.getString(4));
						item_mrp = Double.parseDouble(resultSet.getString(5)); 
						item_group_code = resultSet.getString(6);
						
						
						if(count%2==0){
						
      out.write("\n");
      out.write("\t\t\t\t\t\t \t<tr onclick=\"createSelectBachkaTable('");
      out.print(item_code);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_name);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_weight);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_mrp);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print("aa");
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_qty);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_group_code);
      out.write("');\" style=\"height: 7px;\">\n");
      out.write("\t\t\t\t\t\t\n");
      out.write("\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t <td style=\"width: 55%\">");
      out.print(item_name );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 12%;\">");
      out.print(item_weight );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 10%;\">");
      out.print(item_mrp );
      out.write(" </td>\n");
      out.write("\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 20%;\">");
      out.print(item_qty );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t");

						}
						else{
							
							
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<tr onclick=\"createSelectBachkaTable('");
      out.print(item_code);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_name);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_weight);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_mrp);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print("aa");
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_qty);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_group_code);
      out.write("');\" style=\"height: 7px;\">\n");
      out.write("\t\t\t\t\t\t\t\t <td style=\"width: 55%\">");
      out.print(item_name );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t\t<td style=\"width: 12%;\">");
      out.print(item_weight );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t\t<td style=\"width: 10%;\">");
      out.print(item_mrp );
      out.write(" </td>\n");
      out.write("\t\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t<td style=\"width: 20%;\">");
      out.print(item_qty );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t");

						}
				
						 
						count++;
				}while(resultSet.next());
						
			}
				else{
					System.out.println(" no data ");
				}
				
				
      out.write("</tbody>\n");
      out.write("\t\t\t\t</table>\n");
      out.write("\t\t\t\t");

				resultSet.close();
				bachkaMapping.closeAll();
				objMI.closeAll();
	}
	
	// code for item group code
		else if(ajaxCallOption.equals("getItemGroupCode"))
		{
			System.out.println("get item group code ");
			//inventory.ManageSite objMV = new inventory.ManageSite("jdbc/js");
			
			String item_group_code = request.getParameter("item_group_code");
			
			System.out.println("item group code "+item_group_code);
			//ResultSet resultSet = objMV.getItemGroupCode();
			BachkaMapping bachkaMapping = new BachkaMapping();
			String itemGroupCodeDesc = bachkaMapping.getItemGrupCodeDesc(item_group_code);
			ResultSet resultSet= bachkaMapping.getItemGroupCode();
			
			
      out.write("<table class=\"bachka\"  style=\"width: 100%;height: 25px;border-width:2px;margin: 1px;\"><tr><td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Select Item Group Code</b>&nbsp;&nbsp;&nbsp;:<select name=\"getItemGroupCode\" style=\"width: 150px;\" id=\"itemGroupCode\" onchange=\"getItemByGroupCode();\" class=\"textfield\"> -->\t\n");
      out.write("\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Choose Item Group </b>&nbsp;&nbsp;&nbsp;:<select name=\"getItemGroupCode\" style=\"width: 150px;\" id=\"itemGroupCode\" class=\"textfield\">\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t");
 if(item_group_code!=null){
				System.out.println( itemGroupCodeDesc + "item group code "+item_group_code);
				
      out.write("\n");
      out.write("\t\t\t");
      out.write("\n");
      out.write("\t\t\t<option value=\"\" selected=\"selected\">Select</option>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t");
 }
			while(resultSet.next()){
				String itemGroupCodeValue = resultSet.getString(1);
				String itemGroupCodeDescValue = resultSet.getString(2);
				
				
      out.write("\t\t\n");
      out.write("\t\t\t\n");
      out.write("\t\t<option value=\"");
      out.print(itemGroupCodeValue);
      out.write('"');
      out.write('>');
      out.print(itemGroupCodeDescValue);
      out.write("</option>\n");
      out.write("\t\t\n");
      out.write("\t");
 		System.out.println("itemGroupCode "+itemGroupCodeValue);
			}
			
      out.write("</select>\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t\t<td style=\"font-weight: bold;\">Item Name&nbsp;&nbsp;&nbsp;<input type=\"text\" id=\"itemName\" class=\"textfield\"></td>\n");
      out.write("\t\t\t<td s\"><input type=\"button\"  style=\"width: 150px;\" accesskey=\"i\" value=\"Search Item<Alt+i>\" class=\"button\" onclick=\"getItem();\"> </td>\n");
      out.write("\t\t\t</tr>\n");
      out.write("\t\t\t</table>\t\n");
      out.write("\t\t\t");

			resultSet.close();
			bachkaMapping.closeAll();
		}
	
	
	//display item by group code
		else if(ajaxCallOption.equals("getItemByGroupCode")){
			System.out.println("get item by group code ");
			String barcode = "", itemName = "";
			String item_code, item_weight, item_name, title;
			int item_qty, price_version, item_pv_qty, site_qty, total_site_qty, item_box_qty;
			double item_mrp, item_rate;
			
			String item_group_code = request.getParameter("item_group_code");
			int siteId = Integer.parseInt(request.getParameter("siteID"));
			String bachkaCode = request.getParameter("mixtureCode");
			String itemNameParameter = request.getParameter("itemName");
			
	//		System.out.println("get item by group code " +item_group_code +"\n site Id "+siteId);
			System.out.println("get item by group code " +item_group_code +"\n siteId  "+request.getParameter("siteID"));
			
			BachkaMapping bachkaMapping = new BachkaMapping();
			ArrayList<String> itemCodeArrayList = bachkaMapping.getItemCode(bachkaCode);
			bachkaMapping.closeAll();
			
			ManageInventory objMI = new ManageInventory("jdbc/js");
			ResultSet resultSet = bachkaMapping.getItemBygroupCode(item_group_code,itemNameParameter);
			
			
      out.write("\n");
      out.write("\t\t\t\t<table style=\"width: 100%;max-height: 100%;border-collapse: collapse;border:1px solid #98bf21;\" id=\"itemByGroupCodeTable\">\n");
      out.write("\t\t\t\t<thead style=\"height: 10px;font-size:15px;\n");
      out.write("\t\t\t\t\t\t\ttext-align:left;\n");
      out.write("\t\t\t\t\t\t\tpadding-top:5px;\n");
      out.write("\t\t\t\t\t\t\tpadding-bottom:4px;\n");
      out.write("\t\t\t\t\t\t\tbackground-color:#A7C942;\n");
      out.write("\t\t\t\t\t\t\tcolor:#ffffff;\">\n");
      out.write("\t\t\t\t\t<!-- <th style=\"width: 27%;text-align: left;\">Item Name</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 13%;text-align: left;\">Weight</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 13%;text-align: left;\">MRP</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 15%;text-align: left;\">Site Inventory</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 15%;text-align: left;\">Total Inventory</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 28%;text-align: left;\">Item Group Code</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 7%;text-align: left;\">Add</th>\n");
      out.write("\t\t\t\t\t -->\n");
      out.write("\t\t\t\t\t \n");
      out.write("\t\t\t\t\t<th style=\"width: 55%;\">Item Name</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 12%;\">Weight</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 10%;\">MRP</th>\n");
      out.write("\t\t\t\t\t<th style=\"width: 20%;\">Total Inventory</th>\n");
      out.write("\t\t\t\t\t<!-- <th style=\"width: 30%;\">Item Group Code</th> -->\n");
      out.write("\t\t\t\t\t<th style=\"width: 7%;text-align: left;\">Add</th>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t</thead>\n");
      out.write("\t\t\t<tbody style=\"cursor: pointer;\">\n");
      out.write("\t\t\t");

			
			if(resultSet.next()){
				int count=0;
				do{
					/* barcode = resultSet.getString(1);
					item_code = resultSet.getString(2);
					item_weight = resultSet.getString(3);
					//System.out.println("=======\nitem weight "+item_weight);
					item_name = resultSet.getString(4);
				//	System.out.println("=======\nitem name "+item_name);
					price_version = resultSet.getInt(6);
					item_mrp = resultSet.getDouble(7);
					item_rate = resultSet.getDouble(8);
					item_pv_qty = resultSet.getInt(9);
					item_box_qty = resultSet.getInt(10);
					//item_group_code = resultSet.getString("item_group_code");
					item_group_code = resultSet.getString(11);
					site_qty = objMI.getSiteQuantity(item_code, siteId,	price_version);
					item_qty = objMI.getTotalSiteQuantity(item_code,price_version);
					
					 */
					 
						item_code = resultSet.getString(1);
						item_weight = resultSet.getString(2);
						item_name = resultSet.getString(3);
						item_qty = Integer.parseInt(resultSet.getString(4));
						item_mrp = Double.parseDouble(resultSet.getString(5)); 
						item_group_code = resultSet.getString(6);
					 
					String checkBox = null;
					//System.out.println("itemCodeArrayList "+itemCodeArrayList);
					if(itemCodeArrayList!=null)
					{
						if(itemCodeArrayList.contains(item_code)){
							System.out.println("===== mixture mapping");
							checkBox = "<input type='checkbox' name='addItem' onclick=\"addItemIntoDIV('"+item_name+"','"+item_weight+"','"+item_code+"','checkbox"+count+"','"+bachkaCode+"');\" disabled='disabled' checked='checked' id='checkbox"+count+"'>";
						}else
							checkBox = "<input type='checkbox' name='addItem' onclick=\"addItemIntoDIV('"+item_name+"','"+item_weight+"','"+item_code+"','checkbox"+count+"','"+bachkaCode+"');\" id='checkbox"+count+"'>";
						
					
						
					}
					if(count%2==0){
						
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<tr style=\"height: 7px;\">\n");
      out.write("\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t <td style=\"width: 55%\">");
      out.print(item_name );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 12%;\">");
      out.print(item_weight );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 10%;\">");
      out.print(item_mrp );
      out.write(" </td>\n");
      out.write("\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 20%;\">");
      out.print(item_qty );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 7%;\">");
      out.print(checkBox );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t");
}
						else{
							
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t \n");
      out.write("\t\t\t\t\t\t\t <td style=\"width: 55%\">");
      out.print(item_name );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 12%;\">");
      out.print(item_weight );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 10%;\">");
      out.print(item_mrp );
      out.write(" </td>\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 20%;\">");
      out.print(item_qty );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width: 7%;\">");
      out.print(checkBox );
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t");
	
							
						}
				
						 
						count++;
					
				}while(resultSet.next());
			}
			else{
				
				System.out.println(" no data   ");
			}
			
      out.write("\n");
      out.write("\t\t\t\t</table>\n");
      out.write("\t\t\t");

			
			resultSet.close();
			objMI.closeAll();
			bachkaMapping.closeAll();
			
		}
	else if(ajaxCallOption.equals("saveToDB")){
		
		System.out.println(" save to Db  ");
		//System.out.println(" save to Db  "+ request.getParameter("itemCodeArray"));
		//System.out.println(" save to Db  "+request.getParameter("mixtureCodeArray"));
		
		String [] itemCodeArray = request.getParameter("itemCodeArray").split(",");
		String [] bachkaCodeArray = request.getParameter("mixtureCodeArray").split(",");
		System.out.print("item Code Array  : ");
		for(String s : itemCodeArray){
			System.out.print(s+"\t");
			
		}
		System.out.println();
		System.out.print("Bachka Code Array  : ");
		for(String s : bachkaCodeArray){
			System.out.print(s+"\t");
			
		}
		BachkaMapping bachkaMapping = new BachkaMapping();
		int count = bachkaMapping.insertIntoBachkaMapping(itemCodeArray, bachkaCodeArray);
		out.print(count);		
		bachkaMapping.closeAll();
	}
	else if(ajaxCallOption.equals("mixtureMapping")){
			System.out.println(" ====\n\n mixture mapping   ");
			String bachkaCode  =  request.getParameter("globalMixtureCode");
			System.out.println(bachkaCode);
			BachkaMapping bachkaMapping = new BachkaMapping();
			ResultSet resultSet = bachkaMapping.getBachkaMappingResult(bachkaCode);
			
		
      out.write("\n");
      out.write("\t\t\t<table style=\"max-height: 100%;width: 100%;border-collapse: collapse;\" id=\"selectedBachkaTable1\">\n");
      out.write("\t\t\t\t<thead style=\"height: 7px;\n");
      out.write("\t\t\t\t\t\t\tfont-family:'Times New Roman',Times,serif;\t\n");
      out.write("\t\t\t\t\t\t\tborder:1px solid #98bf21;\n");
      out.write("\t\t\t\t\t\t\tfont-size:15px;\n");
      out.write("\t\t\t\t\t\t\ttext-align:left;\n");
      out.write("\t\t\t\t\t\t\tpadding-top:5px;\n");
      out.write("\t\t\t\t\t\t\tpadding-bottom:4px;\n");
      out.write("\t\t\t\t\t\t\tbackground-color:#A7C942;\n");
      out.write("\t\t\t\t\t\t\tcolor:#ffffff;\">\n");
      out.write("\t\t\t\t\t<tr style=\"text-align: left;\">\n");
      out.write("\t\t\t\t\t\t<th style=\"width: 50%;\">Item Name</th>\n");
      out.write("\t\t\t\t\t\t<th style=\"width: 25%;\">Item Code</th>\n");
      out.write("\t\t\t\t\t\t<th style=\"width: 15%;\">Weight</th>\n");
      out.write("\t\t\t\t\t\t<th style=\"width: 10%;\"></th>\n");
      out.write("\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t</thead>\n");
      out.write("\t\t\t\t<tbody ID=\"mixtureMapping\" style=\"border:1px solid #98bf21;height: 5px;\">\n");
      out.write("\t\t");
	if(resultSet.next()){
			int count=0;
			do{
				String item_code = resultSet.getString(1);
				
      out.write("\n");
      out.write("\t\t\t\t\t<tr style=\"text-align: left;height: 5px; \"  id=\"row");
      out.print(count);
      out.write("\"s>\n");
      out.write("\t\t\t\t\t\t<td style=\"width: 50%;\">");
      out.print(resultSet.getString(2));
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t<td style=\"width: 25%;\">");
      out.print(item_code);
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t<td style=\"width: 15%;\">");
      out.print(resultSet.getString(3));
      out.write("</td>\n");
      out.write("\t\t\t\t\t\t<td style=\"width: 10%;\"><img alt=\"remove item\" src='images/trash-iconBachka.png' onclick=\"deleteRowFromDatabase('row");
      out.print(count);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(bachkaCode);
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print(item_code);
      out.write("');\"> </td>\n");
      out.write("\t\t\t\t\t</tr>\n");
      out.write("\t\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t");

				
			}while(resultSet.next());
			
		}
		else{
		
		
			
		}
		
		
      out.write("\n");
      out.write("\t\t\t</tbody>\n");
      out.write("\t\t\t</table>\n");
      out.write("\t\t");

		resultSet.close();
		bachkaMapping.closeAll(); 
		
	}
	else if(ajaxCallOption.equals("deleteFromDB")){
		System.out.println(" ====\n\n delete mapping. ");
		String bachkaCode = request.getParameter("mixture_code");
		String itemCode = request.getParameter("item_code");
		System.out.println(" \n "+ bachkaCode + " "+itemCode);
		BachkaMapping bachkaMapping = new BachkaMapping();
 		int rowsUpdate = bachkaMapping.deleteRecord(bachkaCode, itemCode);
 		System.out.print(rowsUpdate+" rows deleted");
 		out.print(rowsUpdate);
 		bachkaMapping.closeAll();
		
	}	
	

      out.write('\n');
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
