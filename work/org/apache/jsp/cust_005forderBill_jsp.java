/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.42
 * Generated at: 2014-02-07 05:39:20 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import payment.ManagePayment;
import java.sql.*;
import javax.naming.*;
import javax.sql.*;
import java.text.*;
import java.io.*;
import java.util.Hashtable;

public final class cust_005forderBill_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "sessionBoth.jsp" + (("sessionBoth.jsp").indexOf('?')>0? '&': '?') + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("formName", request.getCharacterEncoding())+ "=" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("cust_orderBill.jsp", request.getCharacterEncoding()), out, false);
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("    <script src=\"js/custOrderSummDetails.js\"></script> \t\n");
      out.write("\t<link rel=\"stylesheet\" type=\"text/css\" href=\"stylesheet/menu.css\" />\n");
      out.write("<style type=\"text/css\">\n");
      out.write("\thr {\n");
      out.write("\t\tcolor: gray;\n");
      out.write("\t\theight: 3px;\n");
      out.write("\t}\n");
      out.write("\tbody {\n");
      out.write("\t\tfont-family: Lucida Grande, Arial, sans-serif;\n");
      out.write("\t\tfont-size: 10px;\n");
      out.write("\t\ttext-align: center;\n");
      out.write("\t\tmargin: 0;\n");
      out.write("\t\tpadding: 0;\n");
      out.write("\t\tcolor: black;\t\t\n");
      out.write("\t}\t\n");
      out.write("\ttable\n");
      out.write("\t{\n");
      out.write("\t\tborder: 1px;\t\t\n");
      out.write("\t\tfont-size: 10px;\n");
      out.write("\t}\n");
      out.write("\ttr,\n");
      out.write("\t{\n");
      out.write("\t\tvertical-align: top;\n");
      out.write("\t\theight:5px;\n");
      out.write("\t}\n");
      out.write("\tth\n");
      out.write("\t{\n");
      out.write("\t\ttext-align: left;\n");
      out.write("\t\tbackground-color:#FFE4C4\n");
      out.write("\t}\n");
      out.write("\tth,\n");
      out.write("\ttd\n");
      out.write("\t{\n");
      out.write("\t\tpadding: 0px;\n");
      out.write("\t\tfont-family: Lucida Grande, Arial, sans-serif;\n");
      out.write("\t\tfont-size: 1.2em;\n");
      out.write("\t\theight: 5px;\t\t\n");
      out.write("\t}\t\n");
      out.write("\ta {\n");
      out.write("\t\tfont-weight: bold;\n");
      out.write("\t\ttext-decoration: none;\n");
      out.write("\t\tcolor: #f30;\n");
      out.write("\t}\n");
      out.write("\tINPUT{ \n");
      out.write("\t\theight: 16px;\n");
      out.write("\t    font-size:9px;  \n");
      out.write("\t    line-height: 9px; \n");
      out.write("\t}\n");
      out.write("\tinput.button{ \n");
      out.write("\t\theight: 20px;\n");
      out.write("\t    font-size:20px;  \n");
      out.write("\t    line-height: 20px;\n");
      out.write("\t}\t\n");
      out.write("\ta:hover {\n");
      out.write("\t\tcolor: #fff;\n");
      out.write("\t\tbackground-color: #f30; \n");
      out.write("\t}\t\n");
      out.write("\t#content h1 {\n");
      out.write("\t\tfont-size: 1.6em;\n");
      out.write("\t\tborder-bottom: 1px solid #ccc;\n");
      out.write("\t\tpadding: 5px 0 5px 0;\n");
      out.write("\t}\n");
      out.write("\n");
      out.write("\t#content h2 {\n");
      out.write("\t\tfont-size: 1.2em;\n");
      out.write("\t\tmargin-top: 3em;\n");
      out.write("\t}\n");
      out.write("</style>\t\t\t\n");
      out.write("\t\n");
      out.write("\t\n");
  String user=(String)session.getAttribute("UserName");
	String custCode="";
  	custCode=request.getParameter("hcuscode");  	
	String backPage="";
  	backPage=request.getParameter("backPage");
	String area="";
  	area=request.getParameter("harea");
  	String add1="";
  	add1=request.getParameter("hadd1");
  	String add2="";
  	add2=request.getParameter("hadd2");
	String siteId="";
	siteId=request.getParameter("hsiteId");
	String siteName="";
	siteName=request.getParameter("hsiteName");
  	String CustName="",CustPhone="";
  	if(request.getParameter("hcustname")!=null){
  		CustName=request.getParameter("hcustname");
  	}
  	if(request.getParameter("hcustphone")!=null){
  		CustPhone=request.getParameter("hcustphone");
  	}
  	
  	String n_msg="",query="";
    Connection conn=null;
	Statement stmt=null;
	
	String url1="";
	String username1="";
	String password1="";
	try {		
		Context initContext = new InitialContext();
		Context envContext  = (Context)initContext.lookup("java:/comp/env");
		url1 = (String) envContext.lookup("url");		
		username1 = (String) envContext.lookup("username");	
		password1 = (String) envContext.lookup("password");		
		DataSource ds = (DataSource)envContext.lookup("jdbc/js");
		//System.out.print(url1+"  "+username1+"  "+password1);
	} catch(Exception e){
		System.out.println("Error : "+e);
	}
  	ManagePayment mp = new ManagePayment("jdbc/js");
  	float total_balance = mp.getTotalBalane(custCode);
  	mp.closeAll();

 
      out.write("\n");
      out.write("\n");
      out.write("<form name=\"myform\" method=\"post\" class=\"ddm1\" >\n");
      out.write(" <center><h4>Enter Order Details</h4></center>\n");
      out.write(" \n");
      out.write(" \t<b><font color=\"blue\">Order Date : </font></b><input type=\"text\" name=\"Firstfocus\" value=\"\"  size=\"20\" >\n");
      out.write(" \t\n");
      out.write("  \t<br>\n");
      out.write(" \t<hr>\n");
      out.write(" \t<table >\n");
      out.write(" \t <tr>\n");
      out.write(" \t  <td><b>Site Name :</b></td>\n");
      out.write(" \t  <td style=\"color:blue\">");
      out.print(siteName);
      out.write("</td>\n");
      out.write(" \t  <td><b>Customer Code :</b></td>\n");
      out.write(" \t  <td style=\"color:blue\">");
      out.print( custCode );
      out.write("</td>\n");
      out.write(" \t  <td>&nbsp;<b>Customer Name :</b></td>\n");
      out.write(" \t  <td style=\"color:blue\">");
      out.print( CustName );
      out.write("</td>\n");
      out.write(" \t  <td>&nbsp;<b>Customer Phone :</b></td>\n");
      out.write(" \t  <td style=\"color:blue\">");
      out.print( CustPhone );
      out.write("</td>\n");
      out.write(" \t  <td>&nbsp;<b>Total Balance :</b></td>\n");
      out.write(" \t  <td style=\"color:red;\"><u id=\"balance\">");
      out.print( total_balance );
      out.write("</u> /- Rs.</td>\n");
      out.write(" \t </tr>\n");
      out.write(" \t</table>\n");
      out.write(" \t\n");
      out.write(" \t<center>\n");
      out.write("\t<table border=\"1\" align=\"center\">\n");
      out.write(" \t<tr><td colspan=5> \t   \n");
      out.write("\t<table id=\"ItemTable\" border=\"1\" align=\"center\" width=\"960\" height=10 >\t\n");
      out.write("\t\n");
      out.write("\t<!-- JSP plugin-->\n");
      out.write("\t");
      out.write("<object classid=\"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93\" name=\"order\"" + " width=\"" + "100%" + "\"" + " height=\"" + "300" + "\"" + " codebase=\"http://java.sun.com/products/plugin/1.2.2/jinstall-1_2_2-win.cab#Version=1,2,2,0\">");
      out.write("\n");
      out.write("<param name=\"java_code\" value=\"applet.CustomerOrderApplet.class\">");
      out.write("\n");
      out.write("<param name=\"java_codebase\" value=\"applet/classes/\">");
      out.write("\n");
      out.write("<param name=\"java_archive\" value=\"mysql-connector-java-5.1.10-bin.jar\">");
      out.write("\n");
      out.write("<param name=\"type\" value=\"application/x-java-applet\">");
      out.write("\n");
      out.write( "<param name=\"dburl\" value=\"" + url1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"dbusername\" value=\"" + username1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"dbpassword\" value=\"" + password1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"customerCode\" value=\"" + custCode + "\">" );
      out.write("\n");
      out.write( "<param name=\"user\" value=\"" + user + "\">" );
      out.write("\n");
      out.write( "<param name=\"backPage\" value=\"" + backPage + "\">" );
      out.write("\n");
      out.write( "<param name=\"siteId\" value=\"" + siteId + "\">" );
      out.write("\n");
      out.write("<comment>");
      out.write("\n");
      out.write("<EMBED type=\"application/x-java-applet\" name=\"order\"" + " width=\"" + "100%" + "\"" + " height=\"" + "300" + "\"" + " pluginspage=\"http://java.sun.com/products/plugin/\" java_code=\"applet.CustomerOrderApplet.class\" java_codebase=\"applet/classes/\" java_archive=\"mysql-connector-java-5.1.10-bin.jar\"");
      out.write( " dburl=\"" + url1 + "\"" );
      out.write( " dbusername=\"" + username1 + "\"" );
      out.write( " dbpassword=\"" + password1 + "\"" );
      out.write( " customerCode=\"" + custCode + "\"" );
      out.write( " user=\"" + user + "\"" );
      out.write( " backPage=\"" + backPage + "\"" );
      out.write( " siteId=\"" + siteId + "\"" );
      out.write("/>");
      out.write("\n");
      out.write("<noembed>");
      out.write("\n");
      out.write("\n");
      out.write("\t          <B>Unable to start plugin!</B>\n");
      out.write("\t     ");
      out.write("\n");
      out.write("</noembed>");
      out.write("\n");
      out.write("</comment>");
      out.write("\n");
      out.write("</object>");
      out.write("\n");
      out.write("\n");
      out.write("\t\n");
      out.write("\t\n");
      out.write("\t<!-- applet tag \n");
      out.write("\t<applet code=\"applet.CustomerOrderApplet.class\" codebase=\"applet/classes/\" \n");
      out.write("\t\t\tarchive=\"mysql-connector-java-5.1.10-bin.jar\"\n");
      out.write("\t\t\tname=\"order\"  id=\"orderApp\" width=\"100%\" height=\"300\">\n");
      out.write("\t</applet>\n");
      out.write("\t-->\n");
      out.write("\t<input type=\"hidden\" name=\"horderNo\" value=\"\">\n");
      out.write("\t<input type=\"hidden\" name=\"horderDate\" value=\"\">\n");
      out.write("\t<input type=\"hidden\" name=\"htotalSel\">\n");
      out.write("\t<input type=\"hidden\" name=\"hidCount\">\n");
      out.write("\t<input type=\"hidden\" name=\"htotOrderValue\">\n");
      out.write("\t<input type=\"hidden\" name=\"htotMRPValue\">\n");
      out.write("\t<input type=\"hidden\" name=\"htotPickup\" value=\"0\">\n");
      out.write("\t<input type=\"hidden\" name=\"cusCode\" value=\"");
      out.print(custCode);
      out.write("\"> \n");
      out.write("\t\n");
      out.write("\t<input type=\"hidden\" name=\"hcuscode\" value=\"");
      out.print(custCode);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"hadd1\" value=");
      out.print(add1);
      out.write("\"\">\n");
      out.write("\t<input type=\"hidden\" name=\"hadd2\" value=\"");
      out.print(add2);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"harea\" value=\"");
      out.print(area);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"hsiteId\" value=\"");
      out.print(siteId);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"hsiteName\" value=\"");
      out.print(siteName);
      out.write("\">\n");
      out.write("\t<tr><td>\t\n");
      out.write("\t\n");
      out.write("\t<input type=\"hidden\" name=\"backPage\" value=\"");
      out.print(backPage);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"huser\" value=\"");
      out.print(user);
      out.write("\">\n");
      out.write("\t\n");
      out.write("\t</td></tr>\n");
      out.write("\t\n");
      out.write("\t</table><br><br>\n");
      out.write("\t<center><hr>\n");
      out.write("\t<table align=\"right\" width=\"48%\">\n");
      out.write("\t <tr>\n");
      out.write("\t  <td>\n");
      out.write("\t   <div id=\"txtHint\" class=\"ddm1\" >\t</div>\n");
      out.write("\t   </td>\n");
      out.write("\t </tr>\n");
      out.write("\t</table>\n");
      out.write("\t\n");
      out.write("\t<div id=\"txtHint1\" class=\"ddm1\" align=\"left\">\t</div>\n");
      out.write("\t<p><h1><center><div id=\"waitMessage\"  style=\"cursor: sw-resize\"></center></div></h1></p>\n");
      out.write("\t\t   \t\t\n");
      out.write("\t</form>\n");
      out.write("\t</body>\n");
      out.write("\t\n");
      out.write("\t<script type=\"text/javascript\">\t\n");
      out.write("\t\tvar newdate = new Date();\n");
      out.write("\t\tvar day= \"\"+newdate.getDate();\n");
      out.write("\t\tif(day.length==1)\n");
      out.write("\t\t\tday=\"0\"+day;\n");
      out.write("\t\tvar month = \"\"+(newdate.getMonth()+1);\t\t\n");
      out.write("\t\tif(month.length==1)\n");
      out.write("\t\t\tmonth=\"0\"+month;\n");
      out.write("\t\tvar year  = newdate.getYear();\t\n");
      out.write("\t\t\n");
      out.write("\t\tfunction showTime(){\t\n");
      out.write("\t\t\tvar newTime = new Date();\t\t\n");
      out.write("\t\t\tvar h=newTime.getHours();\n");
      out.write("\t\t\tvar m=newTime.getMinutes();\n");
      out.write("\t\t\tvar s=newTime.getSeconds();\n");
      out.write("\t\t\t// add a zero in front of numbers<10\n");
      out.write("\t\t\tm=checkTime(m);\n");
      out.write("\t\t\ts=checkTime(s);\t\t\t\t\t\n");
      out.write("\t\t\tvar currenttime\t= h+\":\"+m+\":\"+s;\t\n");
      out.write("\t\t\tnewdate = day +\"/\"+ month + \"/\"+year+\", \"+currenttime;\t\t\t\n");
      out.write("\t\t\tdocument.myform.Firstfocus.value= newdate;\n");
      out.write("\t\t\tvar t= setTimeout(\"showTime();\",1000);\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t\tfunction checkTime(i)\n");
      out.write("\t\t{\n");
      out.write("\t\tif (i<10)\n");
      out.write("\t\t  {\n");
      out.write("\t\t  i=\"0\" + i;\n");
      out.write("\t\t  }\n");
      out.write("\t\treturn i;\n");
      out.write("\t\t}\t\n");
      out.write("\t\t\n");
      out.write("\t\t//document.myform.Firstfocus.focus();\t\t\t\n");
      out.write("\t\tvar allowBackspace = false;\t\t\n");
      out.write("\t\tdocument.onkeydown = checkKey;\n");
      out.write("\t\t\n");
      out.write("\t\tfunction checkKey() {\n");
      out.write("\t\t\tvar key = event.keyCode;\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tif (key==8) {\n");
      out.write("\t\t\tif (allowBackspace==false) {\n");
      out.write("\t\t\t\t\treturn false;\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t\telse \n");
      out.write("\t\t\t\t{\n");
      out.write("\t\t\t\t\treturn true;\t\t\t\t\t\t\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t\t\t\t\n");
      out.write("\t\t\n");
      out.write("\t\twindow.onbeforeunload = setValue;\n");
      out.write("\t\n");
      out.write("\t\twindow.onload = showTimeFirst();\n");
      out.write("\t\tfunction SetFocusOnApplet(){\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t_showHint1();\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t//showTime();\t\n");
      out.write("\t\n");
      out.write("\t\t}\t\n");
      out.write("\t\tfunction showTimeFirst(){\n");
      out.write("\t\t\tshowTime();\n");
      out.write("\t\t\tSetFocusOnApplet();\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t//callApplet();\n");
      out.write("\t\t}\n");
      out.write("\t\tfunction callApplet(){\n");
      out.write("\t\t\t//document.order.focus();\n");
      out.write("\t\t\t//var obj = document.order;\n");
      out.write("\t\t\t//document.order.selectDefault()\n");
      out.write("\t\t\t//alert(\"\" +document.order.selectDefault());\n");
      out.write("\t\t\t//\n");
      out.write("\t\t\t//alert(\"2 \"+orderApp.selectDefault())\n");
      out.write("\t\t\tdocument.getElementById(\"orderApp\").selectDefault();\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t\tfunction Pass(add1,add2,cuscode,area){\t\t\n");
      out.write("\t\t\tvar user1 = document.myform.huser.value;\n");
      out.write("\t        var back = document.myform.backPage.value;\t\t\t\n");
      out.write("\t\t\tdocument.order.start();\n");
      out.write("\t\t    document.order.assignVar(cuscode, user1, back);\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tdocument.myform.hcuscode.value = cuscode;  \n");
      out.write("\t\t    document.myform.hadd1.value = add1;\n");
      out.write("\t        document.myform.hadd2.value = add2;\n");
      out.write("\t        document.myform.harea.value = area;\t\t    \t\n");
      out.write("\t\t\tshowHint1();\n");
      out.write("\t\t\t\n");
      out.write("\t\t}\n");
      out.write("\t\t\t\n");
      out.write("\t\tfunction setValue(){\t\t\t\n");
      out.write("\t\t\topener.parent.childWin = null;\t\t\t\n");
      out.write("\t\t}\n");
      out.write("\tfunction showMsg(){\t\t\n");
      out.write("\t\tif(window.opener && !window.opener.closed){\t\t\t\t\n");
      out.write("\t\t\t\topener.parent.document.myform.custCode.focus();\n");
      out.write("\t\t}else{\n");
      out.write("\t\t\t\talert(\"Parent window is closed, Please Login again & then create order!\");\n");
      out.write("\t\t\t\tself.close();\n");
      out.write("\t\t}   \t   \t\n");
      out.write("\t}\t\n");
      out.write("\tfunction dialogBox(){\t\t\n");
      out.write("\t\tvar yourstate=window.confirm(\"You have not selected any customer, please go to main page to select customer record\")\n");
      out.write("\t\tif (yourstate) {\n");
      out.write("\t\t\tshowMsg();\t\t\t\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\n");
      out.write("\t\n");
      out.write("\t /* document.onkeydown = function(){\n");
      out.write("\t\t  alert('key pressed '+document.order);\n");
      out.write("\t\t  document.order.focus();\n");
      out.write("\t  } */\n");
      out.write("\t \n");
      out.write("\n");
      out.write("</script>\t\n");
      out.write("\t\n");
      out.write("\t</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
