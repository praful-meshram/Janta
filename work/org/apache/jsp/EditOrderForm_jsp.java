/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.42
 * Generated at: 2014-02-04 11:03:16 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.sql.*;
import javax.naming.*;
import javax.sql.*;
import java.io.*;
import java.text.*;
import java.util.*;

public final class EditOrderForm_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			"ErrorPage.jsp?page=EditOrderForm.jsp", true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<script src=\"js/custOrderSummDetails.js\"></script> \t\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"stylesheet/menu.css\" />\n");
      out.write("\n");
      out.write(" \n");
      out.write("\t\n");
      out.write("\t");

	session.getAttribute("UserName").toString();
	//System.out.println("session bachka maapping : "+session +" \n user "+session.getAttribute("UserName").toString());
	
      out.write("\n");
      out.write("<style type=\"text/css\">\n");
      out.write("\thr {\n");
      out.write("\t\tcolor: gray;\n");
      out.write("\t\theight: 3px;\n");
      out.write("\t}\n");
      out.write("\tbody {\n");
      out.write("\t\tfont-family: Lucida Grande, Arial, sans-serif;\n");
      out.write("\t\tfont-size: 10px;\n");
      out.write("\t\ttext-align: center;\n");
      out.write("\t\tmargin: 0;\n");
      out.write("\t\tpadding: 0;\n");
      out.write("\t\tcolor: black;\t\t\n");
      out.write("\t}\t\n");
      out.write("\ttable\n");
      out.write("\t{\n");
      out.write("\t\tborder: 1px;\t\t\n");
      out.write("\t\tfont-size: 10px;\n");
      out.write("\t}\n");
      out.write("\ttr,\n");
      out.write("\t{\n");
      out.write("\t\tvertical-align: top;\n");
      out.write("\t\theight:5px;\n");
      out.write("\t}\n");
      out.write("\tth\n");
      out.write("\t{\n");
      out.write("\t\ttext-align: left;\n");
      out.write("\t\tbackground-color:#FFE4C4\n");
      out.write("\t}\n");
      out.write("\tth,\n");
      out.write("\ttd\n");
      out.write("\t{\n");
      out.write("\t\tpadding: 0px;\n");
      out.write("\t\tfont-family: Lucida Grande, Arial, sans-serif;\n");
      out.write("\t\tfont-size: 1.2em;\n");
      out.write("\t\theight: 5px;\t\t\n");
      out.write("\t}\t\n");
      out.write("\ta {\n");
      out.write("\t\tfont-weight: bold;\n");
      out.write("\t\ttext-decoration: none;\n");
      out.write("\t\tcolor: #f30;\n");
      out.write("\t}\n");
      out.write("\tINPUT{ \n");
      out.write("\t\theight: 16px;\n");
      out.write("\t    font-size:9px;  \n");
      out.write("\t    line-height: 9px; \n");
      out.write("\t}\n");
      out.write("\tinput.button{ \n");
      out.write("\t\theight: 20px;\n");
      out.write("\t    font-size:20px;  \n");
      out.write("\t    line-height: 20px;\n");
      out.write("\t}\t\n");
      out.write("\ta:hover {\n");
      out.write("\t\tcolor: #fff;\n");
      out.write("\t\tbackground-color: #f30; \n");
      out.write("\t}\t\n");
      out.write("\t#content h1 {\n");
      out.write("\t\tfont-size: 1.6em;\n");
      out.write("\t\tborder-bottom: 1px solid #ccc;\n");
      out.write("\t\tpadding: 5px 0 5px 0;\n");
      out.write("\t}\n");
      out.write("\n");
      out.write("\t#content h2 {\n");
      out.write("\t\tfont-size: 1.2em;\n");
      out.write("\t\tmargin-top: 3em;\n");
      out.write("\t}\n");
      out.write("</style>\t\t\t\n");
      out.write("<br><br>\n");
      out.write("<form name=\"myform\">\n");
      out.write("\n");
		Integer siteID = Integer.parseInt(session.getAttribute(
		"GlobalSiteId").toString());
		String user=(String)session.getAttribute("UserName");
		String orderNo="",orderNum="",statusCode="",CustCode="",copyOrder="";	
		orderNo=request.getParameter("horderNo");			
		copyOrder=request.getParameter("hcopy");
		if(copyOrder==null){
			copyOrder="";
		}
		statusCode=request.getParameter("hstatusCode");		
		// This orderNum is passed from tracking.js when this orderNum is holded
		orderNum=request.getParameter("orderNo");
		String holdOrderStr=request.getParameter("holdOrder");			
		if(!orderNum.equals("") && holdOrderStr!=null){
			orderNo = orderNum;
			statusCode=request.getParameter("status_Code");
		}		
		Connection conn=null;
		Statement stat=null;	
		ResultSet rs=null;
		String url1="";
		String username1="";
		String password1="";
		try{	
			Context initContext = new InitialContext();
			Context envContext  = (Context)initContext.lookup("java:/comp/env");
			
			url1 = (String) envContext.lookup("url");		   
			username1 = (String) envContext.lookup("username");			
			password1 = (String) envContext.lookup("password");								
		
			DataSource ds = (DataSource)envContext.lookup("jdbc/js");
			conn = ds.getConnection();
			stat=conn.createStatement();
			String query="select custcode from orders where order_num ='"+ orderNo +"'";	
			rs=stat.executeQuery(query);	
			while(rs.next()) {	
				CustCode = rs.getString(1);
			}
			rs.close();
			stat.close();
			conn.close();
		}catch(Exception e){
			System.out.println("Exception in Finding Customer Code "+ e);
			rs.close();
			stat.close();
			conn.close();
		}

      out.write("\t\t \n");
      out.write("\t\n");
      out.write("<object classid=\"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93\" name=\"EditOrder\"" + " width=\"" + "100%" + "\"" + " height=\"" + "300" + "\"" + " codebase=\"http://java.sun.com/products/plugin/1.2.2/jinstall-1_2_2-win.cab#Version=1,2,2,0\">");
      out.write("\n");
      out.write("<param name=\"java_code\" value=\"applet.EditCustomerOrderApplet.class\">");
      out.write("\n");
      out.write("<param name=\"java_codebase\" value=\"applet/classes/\">");
      out.write("\n");
      out.write("<param name=\"java_archive\" value=\"mysql-connector-java-5.1.10-bin.jar\">");
      out.write("\n");
      out.write("<param name=\"type\" value=\"application/x-java-applet\">");
      out.write("\n");
      out.write( "<param name=\"dburl\" value=\"" + url1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"dbusername\" value=\"" + username1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"dbpassword\" value=\"" + password1 + "\">" );
      out.write("\n");
      out.write( "<param name=\"orderNo\" value=\"" + orderNo + "\">" );
      out.write("\n");
      out.write( "<param name=\"user\" value=\"" + user + "\">" );
      out.write("\n");
      out.write( "<param name=\"statusCode\" value=\"" + statusCode + "\">" );
      out.write("\n");
      out.write( "<param name=\"copyOrder\" value=\"" + copyOrder + "\">" );
      out.write("\n");
      out.write( "<param name=\"siteID\" value=\"" + siteID + "\">" );
      out.write("\n");
      out.write("<comment>");
      out.write("\n");
      out.write("<EMBED type=\"application/x-java-applet\" name=\"EditOrder\"" + " width=\"" + "100%" + "\"" + " height=\"" + "300" + "\"" + " pluginspage=\"http://java.sun.com/products/plugin/\" java_code=\"applet.EditCustomerOrderApplet.class\" java_codebase=\"applet/classes/\" java_archive=\"mysql-connector-java-5.1.10-bin.jar\"");
      out.write( " dburl=\"" + url1 + "\"" );
      out.write( " dbusername=\"" + username1 + "\"" );
      out.write( " dbpassword=\"" + password1 + "\"" );
      out.write( " orderNo=\"" + orderNo + "\"" );
      out.write( " user=\"" + user + "\"" );
      out.write( " statusCode=\"" + statusCode + "\"" );
      out.write( " copyOrder=\"" + copyOrder + "\"" );
      out.write( " siteID=\"" + siteID + "\"" );
      out.write("/>");
      out.write("\n");
      out.write("<noembed>");
      out.write("\n");
      out.write("\n");
      out.write("          <B>Unable to start plugin!</B>\n");
      out.write("     ");
      out.write("\n");
      out.write("</noembed>");
      out.write("\n");
      out.write("</comment>");
      out.write("\n");
      out.write("</object>");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\t\n");
      out.write("\t<input type=\"hidden\" name=\"orderNo\" value=\"");
      out.print(orderNo);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"hcuscode\" value=\"");
      out.print(CustCode);
      out.write("\">\n");
      out.write("\t<input type=\"hidden\" name=\"backPage\" value=\"customer_detailsForm.jsp\">\n");
      out.write("\t<input type=\"hidden\" name=\"printed\" value=\"0\">\t\n");
      out.write("\t\n");
      out.write("\t<tr><td><br><hr><br>\n");
      out.write("\t<table align=\"right\" width=\"49%\">\n");
      out.write("\t <tr>\n");
      out.write("\t  <td >\n");
      out.write("\t   <div id=\"txtHint\" class=\"ddm1\" >\t</div>\n");
      out.write("\t  </td>\n");
      out.write("\t </tr>\n");
      out.write("\t</table>\n");
      out.write("\t\n");
      out.write("\t<div id=\"txtHint1\" class=\"ddm1\" align=\"left\">\t</div>\n");
      out.write("\t<p><h1><center><div id=\"waitMessage\"  style=\"cursor: sw-resize\"></center></div></h1></p>\n");
      out.write("\t\t\n");
      out.write("\t\n");
      out.write("</form>\n");
      out.write("<script>\n");
      out.write("\t\n");
      out.write("\t\twindow.onload=showHint1;\n");
      out.write("\t\tvar allowBackspace = false;\n");
      out.write("\t\tdocument.onkeydown = checkKey;\n");
      out.write("\t\tdocument.onclick = checkKey;\n");
      out.write("\t\tfunction checkKey() {\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tvar key = event.keyCode;\n");
      out.write("\t\t\tif (key==8) {\n");
      out.write("\t\t\t\tif (allowBackspace==false) {\n");
      out.write("\t\t\t\t\treturn false;\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t\telse {\n");
      out.write("\t\t\t\t\treturn true;\t\t\t\t\t\t\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\t\n");
      out.write("\t\t\n");
      out.write("\t\tfunction showMsg(){\t\t\t\t\n");
      out.write("\t\t\t\tdocument.myform.action=\"HomeForm.jsp\";\n");
      out.write("\t\t\t    document.myform.submit();\t\t\t\t\t   \n");
      out.write("\t    }\t\n");
      out.write("\t    function showMsgSend(){\t\t\t\n");
      out.write("\t\t\t\tif(document.myform.printed.value ==1){\t\t\t    \n");
      out.write("\t\t\t\t\tdocument.myform.action=\"print_order1.jsp\";\n");
      out.write("\t\t\t\t    document.myform.submit();\t\t\t\t\t   \n");
      out.write("\t\t\t\t}\t\t\n");
      out.write("\t\t\t\tif(document.myform.printed.value == 0){\t\t\t    \n");
      out.write("\t\t\t\t\tdocument.myform.action=\"customer_detailsForm.jsp\";\n");
      out.write("\t\t\t\t    document.myform.submit();\t\t\t\t\t   \n");
      out.write("\t\t\t\t}\t\t\t\t\t    \n");
      out.write("\t    }\n");
      out.write("\t    \t\n");
      out.write("</script>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
