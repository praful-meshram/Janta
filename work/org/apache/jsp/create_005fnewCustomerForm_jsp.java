/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.42
 * Generated at: 2014-02-24 11:19:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.sql.*;
import javax.naming.*;
import javax.sql.*;

public final class create_005fnewCustomerForm_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			"ErrorPage.jsp?page=create_newCustomerForm.jsp", true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "header.jsp", out, false);
      out.write(' ');
      out.write('\n');
      out.write("\n");
      out.write("\n");
      out.write("<script src=\"js/customer_validation.js\">\n");
      out.write(" </script> \n");
      out.write(" \n");
      out.write(" \n");
      out.write("\t\n");
      out.write("\t");

	session.getAttribute("UserName").toString();
	System.out.println("session bachka maapping : "+session +" \n user "+session.getAttribute("UserName").toString());
	
      out.write("\n");
      out.write(" \n");
      out.write(" \n");
      out.write(" ");
 
 			String backPage=""; 
			String custnm="",phno="",build="",buildno="",block="",wing="",
				   add1="",add2="",area="",station="", mno = "";      		
            backPage=request.getParameter("backPage");
        if(backPage==null){
        	System.out.println("====cust name1 :"+custnm);
			
			custnm="";
			
			phno=""; 
			build="";
			buildno="";
			block="";
			wing="";
			add1="";
			add2="";
			area="";
			station="";	
			mno="";
        }
        else if(!(backPage==null)){ 
			custnm=request.getParameter("custnm");
			//System.out.println("cust name2 : "+custnm);
			phno=request.getParameter("phno"); 
			build=request.getParameter("build");
			buildno=request.getParameter("buildno");
			block=request.getParameter("block");
			wing=request.getParameter("wing");
			add1=request.getParameter("add1");
			add2=request.getParameter("add2");
			area=request.getParameter("area");
			station=request.getParameter("station");
			mno = request.getParameter("mobile");
        }               
          

      out.write("\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("\n");
      out.write("\tfunction checkField(){\n");
      out.write("\t    \n");
      out.write("\t\tvar phoneNo=document.myform.phone.value;\n");
      out.write("\t\tvar area1=document.myform.area.value;\n");
      out.write("\t\tvar custName=document.myform.cusName.value;\n");
      out.write("\t\tif(custName==\"\") {\n");
      out.write("\t\t\t\talert(\"Please Enter Customer Name\");\n");
      out.write("\t\t\t\tdocument.myform.cusName.focus();\n");
      out.write("\t\t\t\treturn false;\n");
      out.write("\t\t}\n");
      out.write("\t\telse if(isNaN(phoneNo)) {\n");
      out.write("\t\t\t\talert(\"Please Enter a number in PhoneNumber field\");\n");
      out.write("\t\t\t\tdocument.myform.phone.value=\"\";\n");
      out.write("\t\t\t\tdocument.myform.phone.focus();\n");
      out.write("\t\t\t\treturn false;\n");
      out.write("\t\t}\n");
      out.write("\t\telse if(phoneNo==\"\") {\n");
      out.write("\t\t\t\talert(\"Please Enter your Phone Number\");\n");
      out.write("\t\t\t\tdocument.myform.phone.focus();\n");
      out.write("\t\t\t\treturn false;\n");
      out.write("\t\t}\n");
      out.write("\t\telse if(area1==\"\") {\n");
      out.write("\t\t\t\talert(\"Please Select Area\");\n");
      out.write("\t\t\t\tdocument.myform.area.focus();\n");
      out.write("\t\t\t\treturn false;\n");
      out.write("\t\t}\n");
      out.write("\t\telse {\n");
      out.write("\t\t    document.myform.Submit.disabled = true;\n");
      out.write("\t\t\tvar ans=confirm(\"Do you want to create this Customer?\");\n");
      out.write("\t\t\tif (ans==true){\n");
      out.write("\t\t\t\t\n");
      out.write("\t\t\t\tdocument.myform.action=\"create_newCustomer.jsp\";\t\t\t\t\n");
      out.write("\t\t\t\tdocument.myform.submit();\n");
      out.write("\t\t\t\t\n");
      out.write("\t\t\t}\n");
      out.write("\t\t\telse\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t  window.refresh; \n");
      out.write("\t\t\t }\t\t\t\n");
      out.write("\t\t}\t\n");
      out.write("\t}\t\n");
      out.write("\tfunction showMsg(){\n");
      out.write("\t\tvar backPage=document.myform.backPage.value;\n");
      out.write("\t\tif(backPage !=\"customer_detailsForm.jsp\"){\n");
      out.write("\t  \t document.myform.action=\"HomeForm.jsp\";\n");
      out.write("\t   \t document.myform.submit();\n");
      out.write("\t   \t}else{\n");
      out.write("\t   \t\twindow.close();\n");
      out.write("\t   \t}\n");
      out.write("\t}\n");
      out.write("\tfunction isNumberKey(evt) {\n");
      out.write("\t\tvar charCode = (evt.which) ? evt.which : event.keyCode;\n");
      out.write("\t\tif (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57))\n");
      out.write("\t\t\treturn false;\n");
      out.write("\t\telse\n");
      out.write("\t\t\treturn true;\n");
      out.write("\t}\n");
      out.write("</script>\n");
      out.write("<center>\n");
      out.write("<div style=\"width: 700px;\">\n");
      out.write("<h3>Create a New Customer</h3>\n");
      out.write("<form name=\"myform\" method=\"post\">\n");
      out.write("\t<table border=\"0\" align=\"center\"  style=\"width:100%;\">\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td style=\"width:15%;\" align=\"left\"><b>Customer Name</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td><td  style=\"width: 30%;\" align=\"left\">\n");
      out.write("\t\t\t\t<input style=\"width: 100%;\" type=\"text\" name=\"cusName\"  align=\"right\" value=\"");
      out.print(custnm);
      out.write("\">\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Mobile Number</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td style=\"width:30%;\" align=\"left\">\n");
      out.write("\t\t\t\t<input style=\"width:100%;\" type=\"text\" name=\"mobile\"  align=\"right\" value=\"");
      out.print(mno);
      out.write("\" \n");
      out.write("\t\t\t\tonblur=\"showHint('mo');\" onkeypress=\"return isNumberKey(event)\">\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Phone Number</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td style=\"width:30%;\" align=\"left\">\n");
      out.write("\t\t\t\t<input style=\"width:100%;\" type=\"text\" name=\"phone\" size=\"22\"  value=\"");
      out.print(phno);
      out.write("\" align=\"right\" \n");
      out.write("\t\t\t\tonblur=\"showHint('ph');\" onkeypress=\"return isNumberKey(event)\">\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td  align=\"left\" style=\"width:15%;\"><b>Building Name</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"building\"  align=\"right\" value=\"");
      out.print(build);
      out.write("\" ></b></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td  align=\"left\" style=\"width:15%;\"><b>Building No.</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"buildingno\"  align=\"right\" value=\"");
      out.print(buildno);
      out.write("\"></b></td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Wing</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type =\"text\" name=\"wing\"  value=\"");
      out.print(wing);
      out.write("\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td>&nbsp;&nbsp;</td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td  align=\"left\" style=\"width:15%;\"><b>Flat No.</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type =\"text\" name=\"block\"  align=\"right\" value=\"");
      out.print(block);
      out.write("\"></td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Address1</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type =\"text\" name=\"add1\" value=\"");
      out.print(add1);
      out.write("\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Address2</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type =\"text\" name=\"add2\" size=\"22\" value=\"");
      out.print(add2);
      out.write("\"></td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Area</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td><td>\n");
 

	String name,city1="",state1="",category="",station1="";
	try {
		
		Context initContext = new InitialContext();
		Context envContext  = (Context)initContext.lookup("java:/comp/env");
		DataSource ds = (DataSource)envContext.lookup("jdbc/js");
		Connection conn = ds.getConnection();
		Statement stmt = conn.createStatement();
		
		ResultSet rs = stmt.executeQuery("select value from code_table where category='AREA' order by value asc");
					

      out.write("\n");
      out.write("\t\t\t\t\n");
      out.write("\t\t\t\t\t\t<SELECT name=\"area\" align=\"left\" style=\"width: 100%;\">\n");
      out.write("\t\t\t\t\t\t<OPTION VALUE=\"\"> Select Area \n");

 		while (rs.next()) {
 			name = rs.getString(1);
 			//System.out.println("area :"+area);
 			if(name.equals(area)){	
 
      out.write("\n");
      out.write(" \t\t\t\t\t<OPTION VALUE=\"");
      out.print(name);
      out.write("\" selected> ");
      out.print( name);
      out.write(" </OPTION>\n");
      out.write(" ");
			}else{

      out.write("\n");
      out.write("\t\t\t<OPTION VALUE=\"");
      out.print(name);
      out.write('"');
      out.write('>');
      out.write(' ');
      out.print( name);
      out.write(" </OPTION>\n");
		}
		}
    	rs.close();
    	ResultSet rs1 = stmt.executeQuery("SELECT category,value FROM code_table where category in('CustDefaultCity','CustDefaultState','CustDefaultStation')");
    	while (rs1.next()){					    	
	    	category = rs1.getString(1);
	    	if (category.equals("CustDefaultCity")) {
	    	   city1 = rs1.getString(2);	    	   					    	    	   
	    	}
	    	if (category.equals("CustDefaultState")) {
	    	   state1 = rs1.getString(2);	    	  
	    	}
	    	if (category.equals("CustDefaultStation")) {
	    	   station1 = rs1.getString(2);	    	  
	    	}						       
        }
        rs1.close();

      out.write("\n");
      out.write("\t\t</select></td>\n");
      out.write("\t\t\n");
      out.write("\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\n");
      out.write("\t\t<td align=\"left\" style=\"width:15%;\"><b>Payment Type</b></td>\n");
      out.write("\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t<td><SELECT name=\"payment\" align=\"left\" style=\"width: 100%;\">\n");
      out.write("\t\t\t<OPTION selected VALUE=\"\"> Select Type \n");

        ResultSet rs2 = stmt.executeQuery("SELECT payment_type_code, payment_type_desc FROM payment_type");
    	while (rs2.next()){	

      out.write("\n");
      out.write("\n");
      out.write("\t\t<OPTION VALUE=\"");
      out.print(rs2.getString(1));
      out.write('"');
      out.write('>');
      out.write(' ');
      out.print( rs2.getString(2));
      out.write(" </option>\n");
      out.write("\n");
	
        }
        rs2.close();
    	stmt.close();
    	conn.close();
	}
	catch (Exception e) {
   		e.getMessage();
    	e.printStackTrace();    	
	}

      out.write("\n");
      out.write("\t\t</select></td>\t\t\t\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Station</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"station\" value=\"");
      out.print(station1);
      out.write("\"  align=\"right\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>Pincode</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"pinCode\" size=\"22\"  align=\"right\" colspan=\"2\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t</tr>\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>City</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"city\" value=\"");
      out.print(city1);
      out.write("\" readonly align=\"right\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td style=\"width:8%;\"></td>\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t<td align=\"left\" style=\"width:15%;\"><b>State</b></td>\n");
      out.write("\t\t\t<td style=\"width:1%;\">:</td>\n");
      out.write("\t\t\t<td><input style=\"width: 100%;\" type=\"text\" name=\"state\" value=\"");
      out.print(state1);
      out.write("\" readonly size=\"22\"  align=\"right\" colspan=\"2\"></td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t</table><br><br> \n");
      out.write("\t<center><input type=\"submit\" name=\"Submit\" accesskey=\"s\" disabled onClick=\"checkField();return false;\"  value=\"Submit <Alt+s>\">\n");
      out.write("\t<input type=\"reset\" name=\"clear\" accesskey=\"r\" value=\"Clear <Alt+r>\">\n");
      out.write("\t<INPUT type=BUTTON value=\"Cancel <Alt+c>\" accesskey=\"c\" onClick=\"showMsg();\"></center>\n");
      out.write("\t<input type=\"hidden\" name=\"backPage\" value=\"");
      out.print(backPage);
      out.write("\">\n");
      out.write("</form>\n");
      out.write("</div>\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("      \tdocument.myform.cusName.focus();\n");
      out.write("      \t\n");
      out.write("      \tfunction check(){\n");
      out.write("    \tdocument.myform.Submit.disabled=false;\n");
      out.write("\t}\n");
      out.write("\t\tdocument.onkeyup = check;\n");
      out.write("</script>\n");
      out.write("<center>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
